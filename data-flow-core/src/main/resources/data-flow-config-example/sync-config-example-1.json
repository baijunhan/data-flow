{
  "_id" : "5f3e14d6a9b8224852a57642",
  "schema" : "abak",
  "converter" : [
    {
      "dest_table" : "core_lm_loan",
      "eval_context" : [
        {
          "sql" : "select loan.loan_no, nvl(loan.orig_prcp,0)+nvl(loan2.orig_prcp, 0) as loan_amount, nvl(loan.orig_prcp, 0) as haier_amount, nvl(loan2.orig_prcp, 0) as capital_amount from glloans_haierdb.v_lm_loan loan left join plus_glloans.v_lm_loan loan2 on loan2.loan_cont_no = loan.loan_cont_no where loan.loan_no = '${#LOAN_NO}' ",
          "type" : "map",
          "data_source" : "haier",
          "name" : "otherAmount"
        },
        {
          "sql" : "select lap.loan_mode as LOAN_MODE  from GLLOANS_HAIERDB.v_lm_loan lo, CMIS_HAIERDB.v_lc_appl lap where lo.loan_cont_no=lap.cont_no and lo.loan_no='${#LOAN_NO}' ",
          "type" : "map",
          "data_source" : "haier",
          "name" : "LM"
        }
      ],
      "simple_class_convert" : true,
      "simple_value_convert" : {
        "LOAN_MODE" : "[LM] == null ? null : [LM][LOAN_MODE]",
        "LOAN_AMOUNT" : "[otherAmount] == null? 0 : ([otherAmount][LOAN_AMOUNT]?:0)",
        "HAIER_AMOUNT" : "[otherAmount] == null ? 0: ([otherAmount][HAIER_AMOUNT]?:0)",
        "CAPITAL_AMOUNT" : "[otherAmount] == null ? 0: ([otherAmount][CAPITAL_AMOUNT]?:0)",
        "update_time" : "null",
        "create_time" : "null"
      },
      "custom_operation" : [],
      "conditional" : [
        {
          "condition" : "[otherAmount] == null or [otherAmount][LOAN_AMOUNT] == null",
          "expression" : "@coreTableSyncService.delayConvert([SRC],true,10)"
        }
      ],
      "db_update" : {
        "method" : "auto",
        "insert" : {
          "auto_id" : true
        },
        "update" : {
          "desc" : "更新时where条件所使用的字段",
          "qualified_field" : [
            "LOAN_NO"
          ]
        },
        "select" : {
          "sql" : "SELECT * FROM core_lm_loan WHERE LOAN_NO='${[LOAN_NO]}'"
        }
      },
      "pre_processor" : "",
      "post_processor" : ""
    }
  ],
  "table" : "lm_loan"
}